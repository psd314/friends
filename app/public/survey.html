<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Friend Finder Home Page</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
		<script
		  src="https://code.jquery.com/jquery-3.2.1.min.js"
		  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
		  crossorigin="anonymous"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
		<script src="https://use.fontawesome.com/9b186a5162.js"></script>
	</head>
	<body>
		<div class="container">
			<div class="row">
				<div class="col-12">
					<h1>Survey Questions</h1>
				</div>
			</div>
			<hr>
			<div class="row">
				<div class='col-12'>
					<form>
						<div class="form-group">
							<label for="nameInput">Name (Required)</label>
							<input type="input" class="form-control" id="nameInput" placeholder="ex. John Smith">
						</div>
						<div class="form-group">
							<label for="imageUrl">Image URL (Required)</label>
							<input type="input" class="form-control" id="imageUrl" placeholder="ex. http://www.myimage.com/my_pic.jpg">
						</div>
					</form>
				</div>
			</div>
			<hr>
			<div class="row">
				<div class="col-12" style="margin: 10px 0;">
					<h3>Question 1</h3>
					<p>Text for question</p>
					<div class="dropdown">
						<button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						Select an Option
						</button>
						<div class="dropdown-menu" aria-labelledby="dropdownMenu1">
							<button class="dropdown-item" type="button">1 (Strongly Disagree</button>
							<button class="dropdown-item" type="button">2</button>
							<button class="dropdown-item" type="button">3</button>							
							<button class="dropdown-item" type="button">4</button>
							<button class="dropdown-item" type="button">5 (Strongly Agree)</button>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-12" style="margin: 10px 0;">
					<h3>Question 2</h3>
					<p>Text for question</p>
					<div class="dropdown">
						<button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						Select an Option
						</button>
						<div class="dropdown-menu" aria-labelledby="dropdownMenu2">
							<button class="dropdown-item" type="button">1 (Strongly Disagree</button>
							<button class="dropdown-item" type="button">2</button>
							<button class="dropdown-item" type="button">3</button>							
							<button class="dropdown-item" type="button">4</button>
							<button class="dropdown-item" type="button">5 (Strongly Agree)</button>
						</div>
					</div>
				</div>
			</div>
			
			<div class="row">
				<div class="col-12" style="margin: 10px 0;">
					<h3>Question 3</h3>
					<p>Text for question</p>
					<div class="dropdown">
						<button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenu3" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						Select an Option
						</button>
						<div class="dropdown-menu" aria-labelledby="dropdownMenu3">
							<button class="dropdown-item" type="button">1 (Strongly Disagree</button>
							<button class="dropdown-item" type="button">2</button>
							<button class="dropdown-item" type="button">3</button>							
							<button class="dropdown-item" type="button">4</button>
							<button class="dropdown-item" type="button">5 (Strongly Agree)</button>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-12" style="margin: 10px 0;">
					<h3>Question 4</h3>
					<p>Text for question</p>
					<div class="dropdown">
						<button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenu4" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						Select an Option
						</button>
						<div class="dropdown-menu" aria-labelledby="dropdownMenu4">
							<button class="dropdown-item" type="button">1 (Strongly Disagree</button>
							<button class="dropdown-item" type="button">2</button>
							<button class="dropdown-item" type="button">3</button>							
							<button class="dropdown-item" type="button">4</button>
							<button class="dropdown-item" type="button">5 (Strongly Agree)</button>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-12" style="margin: 10px 0;">
					<h3>Question 5</h3>
					<p>Text for question</p>
					<div class="dropdown">
						<button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenu5" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						Select an Option
						</button>
						<div class="dropdown-menu" aria-labelledby="dropdownMenu5">
							<button class="dropdown-item" type="button">1 (Strongly Disagree</button>
							<button class="dropdown-item" type="button">2</button>
							<button class="dropdown-item" type="button">3</button>							
							<button class="dropdown-item" type="button">4</button>
							<button class="dropdown-item" type="button">5 (Strongly Agree)</button>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-12" style="margin: 10px 0;">
					<h3>Question 6</h3>
					<p>Text for question</p>
					<div class="dropdown">
						<button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenu6" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						Select an Option
						</button>
						<div class="dropdown-menu" aria-labelledby="dropdownMenu6">
							<button class="dropdown-item" type="button">1 (Strongly Disagree</button>
							<button class="dropdown-item" type="button">2</button>
							<button class="dropdown-item" type="button">3</button>							
							<button class="dropdown-item" type="button">4</button>
							<button class="dropdown-item" type="button">5 (Strongly Agree)</button>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-12" style="margin: 10px 0;">
					<h3>Question 7</h3>
					<p>Text for question</p>
					<div class="dropdown">
						<button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenu7" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						Select an Option
						</button>
						<div class="dropdown-menu" aria-labelledby="dropdownMenu7">
							<button class="dropdown-item" type="button">1 (Strongly Disagree</button>
							<button class="dropdown-item" type="button">2</button>
							<button class="dropdown-item" type="button">3</button>							
							<button class="dropdown-item" type="button">4</button>
							<button class="dropdown-item" type="button">5 (Strongly Agree)</button>
						</div>
					</div>
				</div>
			</div>
			
			<div class="row">
				<div class="col-12" style="margin: 10px 0;">
					<h3>Question 8</h3>
					<p>Text for question</p>
					<div class="dropdown">
						<button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenu8" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						Select an Option
						</button>
						<div class="dropdown-menu" aria-labelledby="dropdownMenu8">
							<button class="dropdown-item" type="button">1 (Strongly Disagree</button>
							<button class="dropdown-item" type="button">2</button>
							<button class="dropdown-item" type="button">3</button>							
							<button class="dropdown-item" type="button">4</button>
							<button class="dropdown-item" type="button">5 (Strongly Agree)</button>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-12" style="margin: 10px 0;">
					<h3>Question 9</h3>
					<p>Text for question</p>
					<div class="dropdown">
						<button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenu9" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						Select an Option
						</button>
						<div class="dropdown-menu" aria-labelledby="dropdownMenu9">
							<button class="dropdown-item" type="button">1 (Strongly Disagree</button>
							<button class="dropdown-item" type="button">2</button>
							<button class="dropdown-item" type="button">3</button>							
							<button class="dropdown-item" type="button">4</button>
							<button class="dropdown-item" type="button">5 (Strongly Agree)</button>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-12" style="margin: 10px 0;">
					<h3>Question 10</h3>
					<p>Text for question</p>
					<div class="dropdown">
						<button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenu10" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						Select an Option
						</button>
						<div class="dropdown-menu" aria-labelledby="dropdownMenu10">
							<button class="dropdown-item" type="button">1 (Strongly Disagree</button>
							<button class="dropdown-item" type="button">2</button>
							<button class="dropdown-item" type="button">3</button>							
							<button class="dropdown-item" type="button">4</button>
							<button class="dropdown-item" type="button">5 (Strongly Agree)</button>
						</div>
					</div>
				</div>
			</div>

			<button type="submit" id="submitButton" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" style="width: 100%;">Submit</button>
			<div class="row">
				<div class="col-12">
					<p><a href="api/friends_list">API Friends List</a> | <a href="https://github.com/psd314/friends" target="_blank">GitHub Repo</a></p>
				</div>
			</div>
			
		</div>

		<!-- Modal -->
		<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
		      <div class="modal-header">
		        <h5 class="modal-title" id="exampleModalLabel"><span id='friendName'></span></h5>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true">&times;</span>
		        </button>
		      </div>
		      <div class="modal-body">
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
		      </div>
		    </div>
		  </div>
		</div>

		<script type="text/javascript">
			$('.dropdown-item').on('click', function() {
				$(this).parent().parent().children()[0].innerText = $(this)[0].innerText;
			});

			$('#submitButton').on('click', function() {

				var userAnswers = [];

				for(var i = 1; i <= 10; i++) {
					userAnswers.push(parseInt($("#dropdownMenu" + i).text()));
				}
				// if NaN or empty name/image
				// alert all fields must be filled in
				// else send ajax request
				var userInfo = {
				    "name": $('#nameInput').val().trim(),
				    "photo": $('#imageUrl').val().trim(),
				    "scores": userAnswers
				}

				var currentURL = window.location.origin;

				$.ajax({
					url: currentURL + '/api/submit',
					method: 'POST',
					data: userInfo
				}).done(function(data) {
					$('#friendName').text(data.name);
					$('.modal-body').html(`<div style='max-width: 100%; max-height: 100%; overflow: hidden;'><img src='${data.photo}'></div>`);
					console.log(data);
				});

			});
		</script>
		
	</body>
</html>